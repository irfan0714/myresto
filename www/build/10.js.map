{"version":3,"sources":["../../src/pages/duplicate-menu/duplicate-menu.module.ts","../../src/pages/duplicate-menu/duplicate-menu.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DuplicateMenuPage } from './duplicate-menu';\n\n@NgModule({\n  declarations: [\n    DuplicateMenuPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DuplicateMenuPage),\n  ],\n})\nexport class DuplicateMenuPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/duplicate-menu/duplicate-menu.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite';\n\n@IonicPage()\n@Component({\n  selector: 'page-duplicate-menu',\n  templateUrl: 'duplicate-menu.html',\n})\nexport class DuplicateMenuPage {\n\n  tables;\n  total_table_empty: any;\n  total_table_active: any;\n  notrans: any;\n  table_active: any;\n  notrans_new: any;\n  constructor(public alertCtrl: AlertController, public viewCtrl: ViewController, private sqlite: SQLite, public navCtrl: NavController, public navParams: NavParams) {\n    this.getCurrentData(navParams.get(\"notrans\"), navParams.get(\"table_active\"));\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ChangeTablePage');\n    this.getTable();\n  }\n\n  getCurrentData(notrans, table_active) {\n    this.notrans = notrans;\n    this.table_active = table_active;\n  }\n\n  getTable() {\n\n    this.sqlite.create({\n      name: 'resto.db',\n      location: 'default'\n    }).then((db: SQLiteObject) => {\n\n      //table\t\n      db.executeSql('SELECT * FROM table_location ', [])\n        .then(res => {\n          this.tables = [];\n          for (let i = 0; i <= res.rows.length; i++) {\n            console.log(res.rows.item(i).table_id, res.rows.item(i).table_color, res.rows.item(i).type_isEmpty)\n            this.tables.push(\n              {\n                table_id: res.rows.item(i).table_id,\n                table_color: res.rows.item(i).table_color,\n                table_isEmpty: res.rows.item(i).type_isEmpty\n              });\n          }\n        })\n        .catch(e => console.log(e));\n\n      //table\t\n      db.executeSql('SELECT * FROM table_location ', [])\n        .then(res => {\n          this.tables = [];\n          for (let i = 0; i <= res.rows.length; i++) {\n            console.log(res.rows.item(i).table_id, res.rows.item(i).table_color, res.rows.item(i).type_isEmpty)\n            this.tables.push(\n              {\n                table_id: res.rows.item(i).table_id,\n                table_color: res.rows.item(i).table_color,\n                table_isEmpty: res.rows.item(i).type_isEmpty\n              });\n          }\n        })\n        .catch(e => console.log(e));\n\n      db.executeSql('SELECT COUNT(table_id) AS TotalEmpty FROM table_location WHERE type_isEmpty=?', ['0'])\n        .then(res => {\n          if (res.rows.length > 0) {\n            this.total_table_empty = parseInt(res.rows.item(0).TotalEmpty);\n          }\n        }).catch(e => console.log(e));\n\n      db.executeSql('SELECT COUNT(table_id) AS TotalActive FROM table_location WHERE type_isEmpty=?', ['1'])\n        .then(res => {\n          if (res.rows.length > 0) {\n            this.total_table_active = parseInt(res.rows.item(0).TotalActive);\n          }\n        }).catch(e => console.log(e));\n\n    }).catch(e => console.log(e));\n  }\n\n  duplicatemenu(table): void {\n    this.sqlite.create({\n      name: 'resto.db',\n      location: 'default'\n    }).then((db: SQLiteObject) => {\n\n      this.notrans_new = this.notrans + '123';\n      //duplicate header\n      db.executeSql('INSERT INTO trans_order_header (NoTrans ,NoKassa ,Tanggal ,Waktu ,Kasir ,KdStore , TotalItem , TotalQty ,TotalServe , Status ,KdPersonal ,KdMeja ,KdContact ,nostruk ,TotalGuest ,AddDate ,keterangan ,KdAgent ,IsCommit ) SELECT ? , NoKassa, Tanggal, Waktu, Kasir, KdStore, TotalItem, TotalQty, ?, Status, KdPersonal, ? , KdContact, nostruk, TotalGuest, AddDate, keterangan, KdAgent, IsCommit FROM trans_order_header WHERE NoTrans=?', [this.notrans_new, '0', table, this.notrans])\n        .then(res => {\n          //comment\n          console.log('Successfully Duplicate Header Menu', table);\n          //lock new table\n          db.executeSql('UPDATE table_location SET table_color=?,type_isEmpty=?  WHERE table_id=?', ['danger', '1', table])\n            .then(res => {\n              console.log(res);\n              //comment\n            })\n            .catch(e => {\n              console.log(e);\n            });\n        })\n        .catch(e => console.log(e));\n\n\n      //duplicate detail\n      db.executeSql('INSERT INTO trans_order_detail (NoTrans ,NoUrut ,NoKassa ,Tanggal  ,Waktu  ,Kasir ,KdStore ,PCode ,Name ,Qty ,Berat ,Satuan ,Keterangan ,Note_split ,Status ,KdPersonal ,KdMeja ,KdContact ,MenuBaru ,Tambahan )  SELECT ? ,NoUrut ,NoKassa ,Tanggal  ,Waktu  ,Kasir ,KdStore ,PCode ,Name ,Qty ,Berat ,Satuan ,?,Note_split ,? ,KdPersonal ,?,KdContact ,MenuBaru ,Tambahan FROM trans_order_detail WHERE NoTrans=?', [this.notrans_new, '', '0', table, this.notrans])\n        .then(res => {\n          //comment\n          const confirm = this.alertCtrl.create({\n            title: 'Successfully Duplicate Menu',\n            message: 'Do you want to print this menu?',\n            buttons: [\n              {\n                text: 'No',\n                handler: () => {\n                  //close modal\n                  this.closeModal();\n                }\n              },\n              {\n                text: 'Yes',\n                handler: () => {\n                  const alert = this.alertCtrl.create({\n                    title: 'Succeess Print.',\n                    subTitle: 'Print Menu From Docket.',\n                    buttons: ['OK']\n                  });\n                  alert.present();\n                }\n              }\n            ]\n          });\n          confirm.present();\n\n        })\n        .catch(e => console.log(e));\n\n    }).catch(e => console.log(e));\n  }\n\n  closeModal() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/duplicate-menu/duplicate-menu.ts"],"sourceRoot":""}